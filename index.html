<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GrowthJournal Ultimate</title>

<link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#10b981">


<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
  body { font-family: 'Poppins', sans-serif; }
</style>
</head>

<body class="bg-gradient-to-br from-slate-50 to-emerald-50 min-h-screen text-slate-800" id="app">

<!-- HEADER -->
<header class="sticky top-0 bg-white/80 backdrop-blur border-b z-50">
  <div class="max-w-5xl mx-auto px-4 py-4 flex justify-between items-center">
    <h1 class="text-xl font-extrabold text-emerald-600">GrowthJournal</h1>
    <div class="flex gap-3 items-center">
      <span id="streak" class="text-sm font-semibold bg-orange-100 text-orange-600 px-4 py-1 rounded-full">ðŸ”¥ 0 Day</span>
      <button onclick="toggleTheme()" class="text-xl">ðŸŒ™</button>
    </div>
  </div>
</header>

<!-- HERO -->
<section class="max-w-5xl mx-auto px-4 py-8 text-center">
  <h2 class="text-3xl md:text-4xl font-extrabold">
    Consistency Builds <span class="text-emerald-600">Greatness</span>
  </h2>
  <p id="quote" class="text-slate-500 mt-3"></p>
</section>

<!-- PROFILE -->
<section class="max-w-5xl mx-auto px-4 mb-6">
  <div class="bg-white rounded-3xl p-6 shadow-sm flex gap-4 items-center">
    <img src="https://www.svgrepo.com/show/384674/account-avatar-profile-user-11.svg" class="w-20">
    <div class="flex-1">
      <input id="name" placeholder="Your Name" class="font-bold text-xl outline-none w-full">
      <input id="goal" placeholder="Your main life goal..." class="text-slate-500 outline-none w-full">
    </div>
  </div>
</section>

<!-- TASK INPUT -->
<section class="max-w-5xl mx-auto px-4">
<form id="taskForm" class="grid md:grid-cols-5 gap-2">
  <input id="taskText" required placeholder="New task..." class="col-span-2 p-3 rounded-xl border">
  <select id="category" class="p-3 rounded-xl border">
    <option>Work</option>
    <option>Study</option>
    <option>Health</option>
    <option>Personal</option>
  </select>
  <select id="priority" class="p-3 rounded-xl border">
    <option>High</option>
    <option>Medium</option>
    <option>Low</option>
  </select>
  <button class="bg-emerald-600 text-white rounded-xl font-semibold">ADD</button>
</form>
</section>

<!-- FILTER -->
<section class="max-w-5xl mx-auto px-4 mt-4 flex gap-2">
  <select id="filter" onchange="render()" class="p-2 rounded-xl border">
    <option>All</option>
    <option>Work</option>
    <option>Study</option>
    <option>Health</option>
    <option>Personal</option>
  </select>
</section>

<!-- TASK LIST -->
<section id="tasks" class="max-w-5xl mx-auto px-4 mt-6 space-y-3"></section>

<!-- PROGRESS -->
<section class="max-w-5xl mx-auto px-4 mt-8">
  <div class="bg-white rounded-3xl p-6 shadow-sm">
    <div class="flex justify-between">
      <span class="font-bold">Daily Progress</span>
      <span id="progressText" class="font-bold text-emerald-600">0%</span>
    </div>
    <div class="h-2 bg-slate-200 rounded-full mt-3">
      <div id="bar" class="h-2 bg-emerald-500 rounded-full"></div>
    </div>
  </div>
</section>

<!-- ANALYTICS -->
<section class="max-w-5xl mx-auto px-4 mt-6">
  <div class="bg-white rounded-3xl p-6 shadow-sm grid grid-cols-3 text-center">
    <div><p class="text-2xl font-bold" id="total">0</p><p class="text-sm">Tasks</p></div>
    <div><p class="text-2xl font-bold" id="done">0</p><p class="text-sm">Completed</p></div>
    <div><p class="text-2xl font-bold" id="rate">0%</p><p class="text-sm">Consistency</p></div>
  </div>
</section>

<!-- POPUP -->
<div id="popup" class="fixed inset-0 hidden bg-black/40 flex items-center justify-center">
  <div class="bg-white rounded-3xl p-8 text-center">
    <h3 class="text-2xl font-extrabold text-emerald-600">ðŸŽ‰ Congratulations!</h3>
    <p id="popupText" class="mt-2"></p>
    <button onclick="closePopup()" class="mt-6 px-6 py-2 bg-emerald-600 text-white rounded-xl">Continue</button>
  </div>
</div>

<script>
const quotes=[
 "Small steps every day.",
 "Discipline beats motivation.",
 "Focus on progress, not perfection.",
 "Your future is built today."
];

let data=JSON.parse(localStorage.getItem("gj_ultra"))||{
 user:{name:"",goal:""},
 tasks:[],
 streak:0,
 lastDate:"",
 theme:"light"
};

const $=id=>document.getElementById(id);
$("quote").innerText=quotes[Math.floor(Math.random()*quotes.length)];

function save(){localStorage.setItem("gj_ultra",JSON.stringify(data));render();}

$("taskForm").onsubmit=e=>{
 e.preventDefault();
 data.tasks.push({
  id:Date.now(),
  text:$("taskText").value,
  category:$("category").value,
  priority:$("priority").value,
  done:false
 });
 $("taskText").value="";
 save();
};

function toggle(id){
 data.tasks=data.tasks.map(t=>t.id===id?{...t,done:!t.done}:t);
 checkStreak();
 save();
}

function del(id){
 data.tasks=data.tasks.filter(t=>t.id!==id);
 save();
}

function render(){
 let list=data.tasks;
 const f=$("filter").value;
 if(f!=="All") list=list.filter(t=>t.category===f);

 $("tasks").innerHTML=list.map(t=>`
  <div class="bg-white p-4 rounded-2xl shadow-sm flex justify-between items-center">
   <div class="flex gap-3 items-center">
    <input type="checkbox" ${t.done?"checked":""} onchange="toggle(${t.id})">
    <div>
     <p class="${t.done?"line-through text-slate-400":""}">${t.text}</p>
     <p class="text-xs text-slate-400">${t.category} â€¢ ${t.priority}</p>
    </div>
   </div>
   <button onclick="del(${t.id})" class="text-red-400">âœ•</button>
  </div>
 `).join("");

 const done=data.tasks.filter(t=>t.done).length;
 const pct=data.tasks.length?Math.round(done/data.tasks.length*100):0;

 $("progressText").innerText=pct+"%";
 $("bar").style.width=pct+"%";
 $("streak").innerText="ðŸ”¥ "+data.streak+" Day";

 $("total").innerText=data.tasks.length;
 $("done").innerText=done;
 $("rate").innerText=pct+"%";
}

function checkStreak(){
 const today=new Date().toDateString();
 const pct=data.tasks.filter(t=>t.done).length/data.tasks.length*100;
 if(pct>=80 && data.lastDate!==today){
  data.streak++;
  data.lastDate=today;
  $("popupText").innerText=`You maintained a ${data.streak} day streak!`;
  $("popup").classList.remove("hidden");
 }
}

function closePopup(){ $("popup").classList.add("hidden"); }

function toggleTheme(){
 document.body.classList.toggle("bg-slate-900");
}

$("name").value=data.user.name;
$("goal").value=data.user.goal;
$("name").oninput=()=>{data.user.name=$("name").value;save();}
$("goal").oninput=()=>{data.user.goal=$("goal").value;save();}

render();
</script>
  <script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js")
    .then(() => console.log("Service Worker Registered"));
}
    function toast(msg="Action completed") {
  const t=document.getElementById("toast");
  t.innerText=msg;
  t.classList.remove("hidden");
  setTimeout(()=>t.classList.add("hidden"),2000);
}
toast("Task added successfully");
toast("ðŸ”¥ Streak updated!");

</script>
<div id="toast" class="fixed bottom-6 right-6 hidden bg-emerald-600 text-white px-4 py-2 rounded-xl shadow-lg">
  Action completed âœ…
</div>


</body>
</html>
